global_arguments:
   aws_default_region: eu-west-2
labels:
   rds:
     aws_product: rds
     environment: dev
     app_tier: database
selectors:
   vpc_info:
     match_labels:
       car: bmw
       environment: dev
     match_keys:
       provider: aws
       region: eu-west-2
     match_params:
       must_exists: True
       resource_type: vpc
   sg_info:
     match_labels:
       car: bmw
       environment: dev
     match_keys:
       provider: aws
       region: eu-west-2
       name: database
     match_params:
       must_be_one: True
       resource_type: security_group
   subnet_info:
     match_labels:
       car: bmw
       environment: dev
     match_keys:
       provider: aws
       region: eu-west-2
       name: private
     match_params:
       resource_type: subnet
infrastructure:
   rds:
       stack_name: elasticdev:::aws_rds_dev
       arguments:
          vpc_name: selector:::vpc_info::name
          sg_id: selector:::sg_info::sg_id
          subnet_ids: selector:::subnet_info::subnet_id:csv
          rds_name: rds-dev-mysql
          allocated_storage: 14
          db_name: app
       labels:
         - rds
       selectors:
         - vpc_info
         - sg_info
         - subnet_info
       credentials:
           - reference: aws_2
             orchestration: true
destroy:
   stack_name: elasticdev:::ed_core::callback_delete

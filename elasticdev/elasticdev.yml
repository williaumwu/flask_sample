global_arguments:
   aws_default_region: eu-west-2
labels:
   general: 
     environment: dev
     purpose: test
   infrastructure:
     cloud: aws
     product: k8
selectors:
   vpc_info:
     match_labels:
       car: bmw
       model: 320i
       environment: dev
       app_tier: networking
     match_keys:
       provider: aws
       region: eu-west-2
     match_params:
       must_exists: True
       resource_type: vpc
   subnet_info:
     match_labels:
       car: bmw
       model: 320i
       environment: dev
       app_tier: networking
     match_keys:
       provider: aws
       region: eu-west-2
       name: private
     match_params:
       resource_type: subnet
infrastructure:
   eks:
       stack_name: elasticdev:::aws_eks_dev
       arguments:
          vpc_name: selector:::vpc_info::name
          vpc_id: selector:::vpc_info::vpc_id
          eks_cluster: eval-ed-eks
          subnet_ids: selector:::subnet_info::subnet_id:csv
          eks_min_capacity: 1
          eks_max_capacity: 1
          eks_desired_capacity: 1
       labels:
          - general
          - infrastructure
       selectors:
         - vpc_info
         - subnet_info
       credentials:
           - reference: aws_2
             orchestration: true
destroy:
   stack_name: elasticdev:::ed_core::callback_delete
